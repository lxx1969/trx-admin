(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c676835"],{"2dbc":function(e,t,a){"use strict";var n=a("ce02"),r=a.n(n);r.a},"61f7":function(e,t,a){"use strict";function n(e){var t=/^1[3,4,5,6,7,8,9]\d{9}$/;return t.test(e)}function r(e){var t=/^[A-Za-z0-9]{6,}$/;return t.test(e)}function l(e){var t=/^\d{6}$/;return t.test(e)}a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l}))},a15b:function(e,t,a){"use strict";var n=a("23e7"),r=a("44ad"),l=a("fc6a"),o=a("a640"),i=[].join,s=r!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:s||!c},{join:function(e){return i.call(l(this),void 0===e?",":e)}})},a567:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableCommon-wrapper"},[a("a-table",{attrs:{columns:e.tableHead,dataSource:e.tableData,loading:e.loading,pagination:e.pagination,"row-selection":e.rowSelection,rowKey:"id",scroll:e.scroll},on:{change:e.handleTableChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,n,r){return[e._t(t,null,null,{text:a,record:n,index:r})]}}}))],null,!0)})],1)},r=[],l={name:"standardTable",props:{tableHead:{type:Array,required:!0},tableData:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Boolean|Object},rowSelection:{type:Object},scroll:{type:Object}},data:function(){return{}},methods:{handleTableChange:function(e){this.$emit("changeCurrent",e.current)}}},o=l,i=a("2877"),s=Object(i["a"])(o,n,r,!1,null,"efa95cdc",null);t["a"]=s.exports},c999:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManage-wrapper"},[a("a-card",{attrs:{hoverable:!0,bordered:!1}},[a("div",{staticClass:"flex flex-wrap",attrs:{slot:"title"},slot:"title"},[a("a-button",{staticClass:"select-bottom",attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v(" 新增用户 ")]),a("a-button",{staticStyle:{margin:"0 16px 10px"},attrs:{type:"danger",icon:"delete",loading:e.deleteLoading},on:{click:e.handleBatchDelete}},[e._v(" 批量删除 ")]),a("a-select",{staticClass:"select-width",attrs:{placeholder:"用户权限",allowClear:""},on:{change:e.changeRole}},e._l(e.roleOption,(function(t){return a("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.label)+" ")])})),1),a("a-input",{staticClass:"select-width",attrs:{placeholder:"用户名",allowClear:""},on:{pressEnter:e.handleSearch},model:{value:e.tableQuery.username,callback:function(t){e.$set(e.tableQuery,"username",t)},expression:"tableQuery.username"}}),a("a-range-picker",{staticClass:"select-width",staticStyle:{width:"210px"},attrs:{placeholder:["开始日期","结束日期"],allowClear:""},on:{change:e.changeTime}}),a("a-button",{staticClass:"select-bottom",staticStyle:{"margin-right":"16px"},attrs:{type:"primary",icon:"search"},on:{click:e.handleSearch}},[e._v(" 查询 ")])],1),a("standard-table",{attrs:{tableData:e.tableData,tableHead:e.tableHead,loading:e.loading,pagination:{pageSize:e.tableQuery.size,current:e.tableQuery.page,total:e.total,showTotal:function(e){return"共 "+e+" 条"}},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.handleSelect}},on:{changeCurrent:e.changeCurrent},scopedSlots:e._u([{key:"index",fn:function(t){var n=t.index;return a("div",{},[e._v(" "+e._s(n+1)+" ")])}},{key:"role",fn:function(t){var n=t.text;return a("div",{},[a("a-tag",{attrs:{color:e._f("statusFilter")(n)}},[e._v(" "+e._s(n)+" ")])],1)}},{key:"action",fn:function(t){var n=t.text;return a("div",{},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleEdit(n)}}},[e._v(" 编辑 ")]),a("a-popconfirm",{attrs:{title:"你确定要删除当前列吗?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.handleDelete(n)}}},[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"danger",size:"small"}},[e._v(" 删除 ")])],1)],1)}}])})],1),e.dialogVisible?a("user-model",{attrs:{roleOption:e.roleOption,currentRow:e.currentRow,dialogVisible:e.dialogVisible},on:{cancel:function(t){e.dialogVisible=!1},ok:e.handleOk}}):e._e()],1)},r=[],l=(a("a15b"),a("d81d"),a("5530")),o=a("b775"),i=o.request;function s(e){return i.post("/userManage/userTable",e)}function c(e){return i.post("/userManage/deleteTable",e)}function u(e){return i.post("/userManage/editUser",e)}function d(e){return i.post("/userManage/addUser",e)}var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.currentRow?"编辑":"新增",visible:e.dialogVisible,okText:"确认",cancelText:"取消",width:620,confirmLoading:e.loading},on:{ok:e.handleSure,cancel:function(){e.$emit("cancel")}}},[a("a-form-model",{ref:"userFrom",attrs:{model:e.userFrom,rules:e.userRule,"label-col":{span:4},"wrapper-col":{span:16},hideRequiredMark:""}},[a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:e.currentRow,expression:"currentRow"}],attrs:{prop:"id",label:"id"}},[a("a-input",{attrs:{disabled:""},model:{value:e.userFrom.id,callback:function(t){e.$set(e.userFrom,"id",t)},expression:"userFrom.id"}})],1),a("a-form-model-item",{attrs:{prop:"username",label:"用户名",hasFeedback:""}},[a("a-input",{model:{value:e.userFrom.username,callback:function(t){e.$set(e.userFrom,"username",t)},expression:"userFrom.username"}})],1),a("a-form-model-item",{attrs:{prop:"password",label:"密码",hasFeedback:""}},[a("a-input",{model:{value:e.userFrom.password,callback:function(t){e.$set(e.userFrom,"password",t)},expression:"userFrom.password"}})],1),a("a-form-model-item",{attrs:{prop:"phone",label:"手机号",hasFeedback:""}},[a("a-input",{attrs:{placeholder:"请输入手机号",size:"large","allow-clear":"",maxLength:11,type:"text"},model:{value:e.userFrom.phone,callback:function(t){e.$set(e.userFrom,"phone",t)},expression:"userFrom.phone"}},[a("svg-icon",{attrs:{slot:"prefix",icon:"phone",size:14},slot:"prefix"})],1)],1),a("a-form-model-item",{attrs:{prop:"role",label:"权限"}},[a("a-radio-group",{model:{value:e.userFrom.role,callback:function(t){e.$set(e.userFrom,"role",t)},expression:"userFrom.role"}},e._l(e.roleOption,(function(t){return a("a-radio",{key:t.key,attrs:{value:t.key}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("a-form-model-item",{attrs:{prop:"text",label:"描述"}},[a("a-textarea",{attrs:{placeholder:"描述...",autoSize:{minRows:3,maxRows:5}},model:{value:e.userFrom.text,callback:function(t){e.$set(e.userFrom,"text",t)},expression:"userFrom.text"}})],1)],1)],1)},m=[],h=a("61f7"),b=function(e,t,a){Object(h["c"])(t)?a():a(new Error("手机号码有误，请重新填写"))},f={name:"userModel",props:{currentRow:[Object,null],dialogVisible:Boolean,roleOption:Array},data:function(){return{userRule:{username:[{required:!0,trigger:"blur",message:"用户名不能为空！"}],password:[{required:!0,trigger:"blur",min:6,message:"密码不能少于6位！"}],role:[{required:!0,trigger:"blur",message:"请选择用户权限！"}],phone:[{required:!0,trigger:"blur",validator:b}]},userFrom:{role:""},loading:!1}},mounted:function(){this.userFrom=Object(l["a"])({},this.currentRow)||{role:""}},methods:{handleSure:function(){var e=this;this.$refs.userFrom.validate((function(t){e.loading=!0,t?e.currentRow?u(e.userFrom).then((function(){e.$message.success("修改成功!"),e.loading=!1,e.$emit("ok")})).catch((function(t){e.loading=!1})):d(e.userFrom).then((function(t){e.$message.success("添加成功!"),e.loading=!1,e.$emit("ok")})).catch((function(t){e.loading=!1})):e.loading=!1}))}}},g=f,w=a("2877"),v=Object(w["a"])(g,p,m,!1,null,null,null),y=v.exports,x=a("a567"),k=a("c1df"),F=a.n(k);a("5c3a");F.a.locale("zh-cn");var R=[{title:"序号",dataIndex:"index",scopedSlots:{customRender:"index"},width:60},{title:"id",dataIndex:"id",width:80},{title:"用户名",dataIndex:"username"},{title:"密码",dataIndex:"password"},{title:"权限",dataIndex:"role",scopedSlots:{customRender:"role"}},{title:"手机号",dataIndex:"phone",ellipsis:!0},{title:"创建日期",dataIndex:"createTime",ellipsis:!0},{title:"描述",dataIndex:"text",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"action"},width:140}],_={name:"userManage",components:{standardTable:x["a"],userModel:y},filters:{statusFilter:function(e){var t={admin:"#f50",test:"#2db7f5",editor:"#87d068"};return t[e]}},data:function(){return{roleOption:[{key:"admin",label:"超级管理员"},{key:"test",label:"普通用户"},{key:"editor",label:"编辑"}],tableQuery:{role:null,username:"",startTime:"",endTime:"",page:1,size:10},total:0,loading:!1,deleteLoading:!1,exportLoading:!1,tableData:[],selectedRowKeys:[],selectValue:[],dialogVisible:!1,currentRow:null,tableHead:R}},mounted:function(){this.getTableList()},methods:{changeRole:function(e){this.tableQuery.role=e},changeTime:function(e,t){Object.assign(this.tableQuery,{startTime:t[0]?t[0]+" 00:00:00":t[0],endTime:t[1]?t[1]+" 23:59:59":t[1]})},handleSelect:function(e,t){this.selectedRowKeys=e,this.selectValue=t},handleSearch:function(){this.tableQuery.page=1,this.getTableList()},handleDelete:function(e){var t=this;c({id:e.id}).then((function(){t.$message.success("删除成功!"),t.getTableList()}))},handleBatchDelete:function(){var e=this;if(0!=this.selectValue.length){this.deleteLoading=!0;var t=this.selectValue.map((function(e){return e.id})).join(",");c({id:t}).then((function(){e.$message.success("删除成功!"),e.getTableList(),e.deleteLoading=!1}))}else this.$message.warning("请至少勾选一项")},handleEdit:function(e){this.currentRow=Object(l["a"])({},e),this.dialogVisible=!0},handleAdd:function(){this.currentRow=null,this.dialogVisible=!0},handleOk:function(){this.dialogVisible=!1,this.currentRow=null,this.getTableList()},changeCurrent:function(e){this.tableQuery.page=e,this.getTableList()},getTableList:function(){var e=this;this.loading=!0,s(this.tableQuery).then((function(t){var a=t.data||[];Object.assign(e,{tableData:a.record||[],loading:!1,total:a.total})}))}}},$=_,S=(a("2dbc"),Object(w["a"])($,n,r,!1,null,"5207c77f",null));t["default"]=S.exports},ce02:function(e,t,a){}}]);